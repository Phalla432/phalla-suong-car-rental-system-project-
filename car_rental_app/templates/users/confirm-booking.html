<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Car Booking - Toyota Camry</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f7fa;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 500px;
      margin: auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    .header {
      background: #003087;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 20px;
      position: relative;
    }
    .close-btn {
      position: absolute;
      right: 15px;
      top: 15px;
      font-size: 24px;
      cursor: pointer;
    }
    .car-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    .details {
      padding: 20px;
    }
    .price { font-size: 18px; font-weight: bold; color: #003087; }
    .seats { color: #555; }
    .description { margin: 10px 0; color: #666; }
    .date-input {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 16px;
    }
    .confirm-btn {
      width: 100%;
      padding: 14px;
      background: #ffcc00;
      border: none;
      border-radius: 8px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 20px;
    }
    .success-message {
      display: none;
      text-align: center;
      padding: 30px;
      color: green;
      font-size: 20px;
      font-weight: bold;
    }
    .my-bookings {
      margin-top: 30px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    .booking-card {
      background: white;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      color: #003087;
    }
  </style>
</head>
<body>

  <!-- Booking Modal -->
  <div class="container" id="bookingModal">
    <div class="header">
      Toyota Camry
      <span class="close-btn" onclick="closeModal()">&times;</span>
    </div>
    <img src="https://via.placeholder.com/500x200?text=Toyota+Camry" alt="Toyota Camry" class="car-image">
    <div class="details">
      <div class="price">Price: $65/day</div>
      <div class="seats">Seats: 5</div>
      <div class="description">Description: Reliable sedan with great fuel economy.</div>

      <label><strong>Start Date</strong></label>
      <input type="date" id="startDate" class="date-input" value="2025-10-30">

      <label><strong>End Date</strong></label>
      <input type="date" id="endDate" class="date-input" value="2025-10-31">

      <button class="confirm-btn" onclick="confirmBooking()">Confirm Booking</button>

      <div class="success-message" id="successMessage">
        âœ… Booking Successful!<br>
        <small>Your Toyota Camry is reserved from <span id="dateRange"></span></small>
      </div>
    </div>
  </div>

  <!-- My Bookings Section -->
  <div class="my-bookings">
    <h2>My Bookings</h2>
    <div id="bookingsList"></div>
  </div>

  <script>
    // Load bookings on page load
    window.onload = loadBookings;

    function confirmBooking() {
      const startDate = document.getElementById('startDate').value;
      const endDate = document.getElementById('endDate').value;

      if (!startDate || !endDate) {
        alert("Please select both start and end dates.");
        return;
      }

      if (new Date(endDate) < new Date(startDate)) {
        alert("End date cannot be before start date.");
        return;
      }

      // Calculate days
      const days = Math.ceil((new Date(endDate) - new Date(startDate)) / (1000 * 60 * 60 * 24)) + 1;
      const totalPrice = days * 65;

      // Booking object
      const booking = {
        car: "Toyota Camry",
        pricePerDay: 65,
        startDate,
        endDate,
        totalDays: days,
        totalPrice,
        bookedAt: new Date().toLocaleString()
      };

      // Save to localStorage
      let bookings = JSON.parse(localStorage.getItem('carBookings')) || [];
      bookings.push(booking);
      localStorage.setItem('carBookings', JSON.stringify(bookings));

      // Show success
      document.getElementById('successMessage').style.display = 'block';
      document.querySelector('.confirm-btn').style.display = 'none';
      document.getElementById('dateRange').textContent = `${startDate} to ${endDate}`;

      // Update bookings list
      loadBookings();
    }

    function loadBookings() {
      const bookingsList = document.getElementById('bookingsList');
      const bookings = JSON.parse(localStorage.getItem('carBookings')) || [];

      if (bookings.length === 0) {
        bookingsList.innerHTML = "<p>No bookings yet.</p>";
        return;
      }

      bookingsList.innerHTML = bookings.map((b, index) => `
        <div class="booking-card">
          <strong>${b.car}</strong><br>
          ðŸ“… ${b.startDate} â†’ ${b.endDate} (${b.totalDays} days)<br>
          ðŸ’° $${b.totalPrice} (${b.pricePerDay}/day)<br>
          <small>Booked on: ${b.bookedAt}</small>
          <button onclick="removeBooking(${index})" style="float:right; background:red; color:white; border:none; padding:5px 10px; border-radius:4px; cursor:pointer;">Cancel</button>
        </div>
      `).join('');
    }

    function removeBooking(index) {
      let bookings = JSON.parse(localStorage.getItem('carBookings')) || [];
      bookings.splice(index, 1);
      localStorage.setItem('carBookings', JSON.stringify(bookings));
      loadBookings();
    }

    function closeModal() {
      document.getElementById('bookingModal').style.display = 'none';
    }
  </script>
</body>
</html>